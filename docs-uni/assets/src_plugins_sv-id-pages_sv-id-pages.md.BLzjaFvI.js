import{_ as s,c as i,o as a,a4 as e}from"./chunks/framework.NgY3Q8ej.js";const u=JSON.parse('{"title":"sv-id-pages","description":"","frontmatter":{},"headers":[],"relativePath":"src/plugins/sv-id-pages/sv-id-pages.md","filePath":"src/plugins/sv-id-pages/sv-id-pages.md","lastUpdated":1715132650000}'),t={name:"src/plugins/sv-id-pages/sv-id-pages.md"},l=e(`<h1 id="sv-id-pages" tabindex="-1">sv-id-pages <a class="header-anchor" href="#sv-id-pages" aria-label="Permalink to &quot;sv-id-pages&quot;">​</a></h1><p>基于 <a href="https://ext.dcloud.net.cn/plugin?name=uni-id-pages" target="_blank" rel="noreferrer"><code>uni-id-pages</code></a> 魔改的用户体系，新的易读易修改的界面样式，并稍作精简，更适合二次开发。</p><blockquote><p>强烈建议优先前往 <a href="https://ext.dcloud.net.cn/plugin?id=15141" target="_blank" rel="noreferrer"><code>插件市场</code></a> 导入示例项目参考一下。</p></blockquote><h2 id="安装与部署" tabindex="-1">安装与部署 <a class="header-anchor" href="#安装与部署" aria-label="Permalink to &quot;安装与部署&quot;">​</a></h2><ol><li><a href="https://ext.dcloud.net.cn/plugin?id=15141" target="_blank" rel="noreferrer">插件市场</a> 中点击 <code>下载插件并导入HBuildeX</code>。</li><li>部署云对象和数据库表至您的 uniCloud 云服务空间，如果您还不会部署，可移步至 <a href="./../../frame/sv-service/sv-service.html#云服务空间初始化">服务端-云服务空间初始化</a>。</li></ol><h2 id="前言" tabindex="-1">前言 <a class="header-anchor" href="#前言" aria-label="Permalink to &quot;前言&quot;">​</a></h2><ol><li>关于 uniCloud 云服务空间的部署相关步骤与问题，已在 <a href="./../../frame/sv-service/sv-service.html#云服务空间初始化">服务端-云服务空间初始化</a> 中详细介绍，此处不再赘述。</li><li>本插件基于 <a href="https://ext.dcloud.net.cn/plugin?name=uni-id-pages" target="_blank" rel="noreferrer"><code>uni-id-pages</code></a> 二次开发，您可能需要对 <a href="https://doc.dcloud.net.cn/uniCloud/uni-id/app.html" target="_blank" rel="noreferrer"><code>uni-id</code></a> 用户体系有一定的了解。</li></ol><h2 id="插件功能" tabindex="-1">插件功能 <a class="header-anchor" href="#插件功能" aria-label="Permalink to &quot;插件功能&quot;">​</a></h2><blockquote><p>✅ 已有 ☑️ 待定 ❎ 没有</p></blockquote><h3 id="登录注册" tabindex="-1">登录注册 <a class="header-anchor" href="#登录注册" aria-label="Permalink to &quot;登录注册&quot;">​</a></h3><ul><li>✅ 客户端账号密码登录（用户名/手机号）</li><li>✅ 客户端账号注册（图形验证码）</li><li>✅ 忘记密码找回（需要绑定手机）</li><li>✅ 客户端手机号验证码登录</li><li>✅ 客户端手机一键登录（仅 App 端）</li><li>✅ 第三方登录 - 微信小程序</li><li>✅ 第三方登录 - App 端微信授权登录</li><li>☑️ 第三方登录 - QQ 小程序</li><li>☑️ 第三方登录 - App 端 QQ 授权登录</li><li>✅ 管理端账号密码登录（仅限管理员）</li><li>❎ 邮箱登录/注册</li></ul><h3 id="个人中心" tabindex="-1">个人中心 <a class="header-anchor" href="#个人中心" aria-label="Permalink to &quot;个人中心&quot;">​</a></h3><ul><li>✅ 个人中心页面</li><li>✅ 个人信息修改</li><li>✅ 账号与安全 - 绑定手机</li><li>✅ 账号与安全 - 绑定微信</li><li>✅ 账号与安全 - 修改密码</li><li>✅ 账号与安全 - 解绑注销</li><li>❎ 实名认证</li></ul><h3 id="其他页面" tabindex="-1">其他页面 <a class="header-anchor" href="#其他页面" aria-label="Permalink to &quot;其他页面&quot;">​</a></h3><ul><li>✅ 用户服务协议</li><li>✅ 隐私政策条款</li></ul><h2 id="插件兼容性" tabindex="-1">插件兼容性 <a class="header-anchor" href="#插件兼容性" aria-label="Permalink to &quot;插件兼容性&quot;">​</a></h2><table><thead><tr><th style="text-align:center;">H5</th><th style="text-align:center;">App</th><th style="text-align:center;">微信小程序</th><th style="text-align:center;">支付宝小程序</th><th style="text-align:center;">QQ 小程序</th><th style="text-align:center;">其他</th></tr></thead><tbody><tr><td style="text-align:center;">✔️</td><td style="text-align:center;">✔️</td><td style="text-align:center;">✔️</td><td style="text-align:center;">❌</td><td style="text-align:center;">❌</td><td style="text-align:center;">❌</td></tr></tbody></table><h2 id="配置与使用" tabindex="-1">配置与使用 <a class="header-anchor" href="#配置与使用" aria-label="Permalink to &quot;配置与使用&quot;">​</a></h2><ul><li><p><a href="https://doc.dcloud.net.cn/uniCloud/uni-id/summary.html#config" target="_blank" rel="noreferrer"><code>uni-config-center 云端配置</code></a></p><blockquote><p>一般来说，你只需要在此处配置填入您各项产品的 appid 和 appsecret 即可，更新配置后记得上传云端。</p></blockquote></li><li><p>插件配置</p><blockquote><p>可参照 <code>@/uni_modules/sv-id-pages/config.js</code> 配置文件中的注释进行配置。</p></blockquote></li><li><p>监听登录成功</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">uni.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;uni-id-pages-login-success&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">e</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // e 中带有token、当前登录用户uid等信息</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;==== 登录成功 ====&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, e);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div></li><li><p>监听退出登录</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">uni.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;uni-id-pages-logout&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;==== 退出登录 ====&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div></li><li><p>获取当前登录用户简要信息</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { store } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;@/uni_modules/sv-id-pages/common/store&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// userInfo 是当前登录用户简要信息，hasLogin 是布尔类型表示当前是否登录成功</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">userInfo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">hasLogin</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> store; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 更建议使用此种方式</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 或者直接从 localStorage 中获取</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> userInfo</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> uni.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getStorageSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;uni-id-pages-userInfo&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div></li><li><p>手动调用退出登录</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { mutations } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;@/uni_modules/sv-id-pages/common/store&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> customLogout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  mutations.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">logout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div></li><li><p>获取当前用户角色/权限</p><blockquote><p>使用 <code>uniCloud.getCurrentUserInfo()</code> 获取当前登录用户角色权限信息，<a href="https://doc.dcloud.net.cn/uniCloud/client-sdk.html#client-getcurrentuserinfo" target="_blank" rel="noreferrer">查看更多</a></p></blockquote></li></ul><h2 id="api-接口文档" tabindex="-1">api 接口文档 <a class="header-anchor" href="#api-接口文档" aria-label="Permalink to &quot;api 接口文档&quot;">​</a></h2><blockquote><p><a href="https://console-docs.apipost.cn/preview/c3268618df9a75e0/6acb1e9aa56ea56c?target_id=d4b30806-ef67-4c1f-a126-dca17094c7c6" target="_blank" rel="noreferrer">文档链接</a></p></blockquote><h2 id="疑难解答" tabindex="-1">疑难解答 <a class="header-anchor" href="#疑难解答" aria-label="Permalink to &quot;疑难解答&quot;">​</a></h2><blockquote><p>可新建 <a href="https://gitee.com/Sonve/sv-app-docs/issues/new" target="_blank" rel="noreferrer"><code>Issue</code></a> / <a href="https://gitee.com/Sonve/sv-app-docs/reward_issues/new" target="_blank" rel="noreferrer"><code>悬赏</code></a> 来 <a href="https://gitee.com/Sonve/sv-app-docs/issues" target="_blank" rel="noreferrer"><code>发起提问</code></a></p></blockquote><ol><li><p>云对象不会部署/部署不成功怎么办？</p><ul><li>移步至 <a href="./../../frame/sv-service/sv-service.html#云服务空间初始化">服务端-云服务空间初始化</a>，或者加群讨论吧。</li></ul></li></ol><h2 id="写在最后" tabindex="-1">写在最后 <a class="header-anchor" href="#写在最后" aria-label="Permalink to &quot;写在最后&quot;">​</a></h2><p>若对插件有任何疑问或者优化建议，欢迎在 <a href="https://ext.dcloud.net.cn/plugin?id=15141#rating" target="_blank" rel="noreferrer">插件评论区</a> 留言，在插件市场中的私信消息本人可能不经常留意，导致没能及时回复， 可以加入本人的插件问答 QQ 交流群: 852637893，欢迎 <a href="https://qm.qq.com/cgi-bin/qm/qr?k=HD9IXnUruOa5pplF1jAeQsLb9BNnP_DE&amp;jump_from=webapi&amp;authKey=tk61Q5la3EAprdYcUBD7v0PBly795OTcT4UT36XxqcG7pmhGRpE+yFlt75vQBWeY" target="_blank" rel="noreferrer">进群交流</a>。</p><img width="200" src="https://mp-74bfcbac-6ba6-4f39-8513-8831390ff75a.cdn.bspapp.com/static/qqqun.jpg" alt="交流群:852637893">`,27),n=[l];function h(p,r,o,d,k,c){return a(),i("div",null,n)}const E=s(t,[["render",h]]);export{u as __pageData,E as default};
